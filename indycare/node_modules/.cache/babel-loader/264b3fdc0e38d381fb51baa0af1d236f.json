{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import iconCam from\"../../resources/Robot/icon-dashcam.svg\";import iconTime from\"../../resources/Robot/icon-time.svg\";import{ImgOnly}from\"../Public/Image\";import Axios from\"axios\";var CamView=/*#__PURE__*/function(_React$Component){_inherits(CamView,_React$Component);function CamView(props){var _this;_classCallCheck(this,CamView);_this=_possibleConstructorReturn(this,_getPrototypeOf(CamView).call(this,props));_this.state={tick:new Date(),clipTick:new Date(),videoURL:''};return _this;}_createClass(CamView,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.clip();// Before Loop\nthis.timerID=setInterval(function(){return _this2.tick();},1000);this.videoID=setInterval(function(){return _this2.clip();},15000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.timerID);clearInterval(this.videoID);}},{key:\"clip\",value:function clip(){var _this3=this;Axios.get('http://localhost:4000/clip/'+this.props.sn).then(function(res){// console.log(res);\nif(res.data==='ok'){var video=_this3.refs.main;//video.style.display = 'block';\nAxios.get('http://localhost:4000/get/clip/'+_this3.props.sn).then(function(res){// console.log(res);\n_this3.setState({videoURL:res});});video.setAttribute('src','http://localhost:4000/get/clip/'+_this3.props.sn);_this3.setState({clipTick:new Date().valueOf()});}}).catch(function(err){alert(err);});}},{key:\"tick\",value:function tick(){this.setState({tick:new Date()});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"event_view\"},React.createElement(\"div\",{className:\"section_title\"},React.createElement(ImgOnly,{src:iconCam,alt:\"icon_dashcam\"}),React.createElement(\"div\",{id:\"clip_msg\"}),React.createElement(\"h3\",null,\"\\xA0\\xA0Workplace View\")),React.createElement(\"div\",{className:\"time\"},React.createElement(\"img\",{src:iconTime,alt:\"icon_time\"}),React.createElement(\"h3\",null,\"\\xA0\\xA0\",this.state.tick.toLocaleTimeString(),\"\\xA0\\xA0\\xA0\")),React.createElement(\"video\",{id:\"clip\",width:\"350\",height:\"280\",controls:true,loop:true,muted:true,autoPlay:true,poster:\"http://localhost:4000/get/poster\",ref:\"main\"},React.createElement(\"source\",{src:this.state.videoURL,type:\"video/mp4\"}),\"Please, refresh the web site.\"));}}]);return CamView;}(React.Component);export default CamView;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/React/indycare/src/components/Robot/Cam.js"],"names":["React","ImgOnly","Axios","CamView","props","state","tick","Date","clipTick","videoURL","clip","timerID","setInterval","videoID","clearInterval","get","sn","then","res","data","video","refs","main","setState","setAttribute","valueOf","catch","err","alert","iconCam","iconTime","toLocaleTimeString","Component"],"mappings":"gsBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,sHAGA,OAAQC,OAAR,KAAsB,iBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAEMC,CAAAA,O,6EACF,iBAAYC,KAAZ,CAAmB,yCACf,yEAAMA,KAAN,GACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EADG,CAETC,QAAQ,CAAE,GAAID,CAAAA,IAAJ,EAFD,CAGTE,QAAQ,CAAE,EAHD,CAAb,CAFe,aAOlB,C,iFAEmB,iBAChB,KAAKC,IAAL,GAAa;AACb,KAAKC,OAAL,CAAeC,WAAW,CACtB,iBAAM,CAAA,MAAI,CAACN,IAAL,EAAN,EADsB,CACH,IADG,CAA1B,CAGA,KAAKO,OAAL,CAAeD,WAAW,CACtB,iBAAM,CAAA,MAAI,CAACF,IAAL,EAAN,EADsB,CACH,KADG,CAA1B,CAGH,C,mEAEsB,CACnBI,aAAa,CAAC,KAAKH,OAAN,CAAb,CACAG,aAAa,CAAC,KAAKD,OAAN,CAAb,CACH,C,mCAEM,iBACHX,KAAK,CAACa,GAAN,CAAU,8BAAgC,KAAKX,KAAL,CAAWY,EAArD,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACT;AACA,GAAIA,GAAG,CAACC,IAAJ,GAAa,IAAjB,CAAuB,CACnB,GAAMC,CAAAA,KAAK,CAAG,MAAI,CAACC,IAAL,CAAUC,IAAxB,CACA;AACApB,KAAK,CAACa,GAAN,CAAU,kCAAoC,MAAI,CAACX,KAAL,CAAWY,EAAzD,EACKC,IADL,CACU,SAAAC,GAAG,CAAG,CACR;AACA,MAAI,CAACK,QAAL,CAAc,CACVd,QAAQ,CAAES,GADA,CAAd,EAGH,CANL,EAOAE,KAAK,CAACI,YAAN,CAAmB,KAAnB,CACI,kCAAoC,MAAI,CAACpB,KAAL,CAAWY,EADnD,EAEA,MAAI,CAACO,QAAL,CAAc,CACVf,QAAQ,CAAE,GAAID,CAAAA,IAAJ,GAAWkB,OAAX,EADA,CAAd,EAGH,CACJ,CAnBL,EAoBKC,KApBL,CAoBW,SAAAC,GAAG,CAAI,CACVC,KAAK,CAACD,GAAD,CAAL,CACH,CAtBL,EAuBH,C,mCAEM,CACH,KAAKJ,QAAL,CAAc,CACVjB,IAAI,CAAE,GAAIC,CAAAA,IAAJ,EADI,CAAd,EAGH,C,uCAEQ,CACL,MACI,4BAAK,SAAS,CAAC,YAAf,EACI,2BAAK,SAAS,CAAC,eAAf,EACI,oBAAC,OAAD,EAAS,GAAG,CAAEsB,OAAd,CAAuB,GAAG,CAAC,cAA3B,EADJ,CAEI,2BAAK,EAAE,CAAC,UAAR,EAFJ,CAGI,uDAHJ,CADJ,CAMI,2BAAK,SAAS,CAAC,MAAf,EACI,2BAAK,GAAG,CAAEC,QAAV,CAAoB,GAAG,CAAC,WAAxB,EADJ,CAEI,yCAAiB,KAAKzB,KAAL,CAAWC,IAAX,CAAgByB,kBAAhB,EAAjB,gBAFJ,CANJ,CAUI,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,KAAvB,CAA6B,MAAM,CAAC,KAApC,CAA0C,QAAQ,KAAlD,CAAmD,IAAI,KAAvD,CAAwD,KAAK,KAA7D,CAA8D,QAAQ,KAAtE,CACO,MAAM,CAAC,kCADd,CACiD,GAAG,CAAC,MADrD,EAEI,8BAAQ,GAAG,CAAE,KAAK1B,KAAL,CAAWI,QAAxB,CAAkC,IAAI,CAAC,WAAvC,EAFJ,iCAVJ,CADJ,CAkBH,C,qBA5EiBT,KAAK,CAACgC,S,EA+E5B,cAAe7B,CAAAA,OAAf","sourcesContent":["import React from 'react';\r\nimport iconCam from \"../../resources/Robot/icon-dashcam.svg\";\r\nimport iconTime from \"../../resources/Robot/icon-time.svg\";\r\nimport {ImgOnly} from \"../Public/Image\";\r\nimport Axios from \"axios\";\r\n\r\nclass CamView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tick: new Date(),\r\n            clipTick: new Date(),\r\n            videoURL: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.clip(); // Before Loop\r\n        this.timerID = setInterval(\r\n            () => this.tick(), 1000\r\n        );\r\n        this.videoID = setInterval(\r\n            () => this.clip(), 15000\r\n        );\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerID);\r\n        clearInterval(this.videoID);\r\n    }\r\n\r\n    clip() {\r\n        Axios.get('http://localhost:4000/clip/' + this.props.sn)\r\n            .then(res => {\r\n                // console.log(res);\r\n                if (res.data === 'ok') {\r\n                    const video = this.refs.main;\r\n                    //video.style.display = 'block';\r\n                    Axios.get('http://localhost:4000/get/clip/' + this.props.sn)\r\n                        .then(res =>{\r\n                            // console.log(res);\r\n                            this.setState({\r\n                                videoURL: res\r\n                            });\r\n                        });\r\n                    video.setAttribute('src',\r\n                        'http://localhost:4000/get/clip/' + this.props.sn);\r\n                    this.setState({\r\n                        clipTick: new Date().valueOf()\r\n                    })\r\n                }\r\n            })\r\n            .catch(err => {\r\n                alert(err);\r\n            })\r\n    }\r\n\r\n    tick() {\r\n        this.setState({\r\n            tick: new Date()\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"event_view\">\r\n                <div className=\"section_title\">\r\n                    <ImgOnly src={iconCam} alt=\"icon_dashcam\"/>\r\n                    <div id=\"clip_msg\"/>\r\n                    <h3>&nbsp;&nbsp;Workplace View</h3>\r\n                </div>\r\n                <div className=\"time\">\r\n                    <img src={iconTime} alt=\"icon_time\"/>\r\n                    <h3>&nbsp;&nbsp;{this.state.tick.toLocaleTimeString()}&nbsp;&nbsp;&nbsp;</h3>\r\n                </div>\r\n                <video id=\"clip\" width=\"350\" height=\"280\" controls loop muted autoPlay\r\n                       poster='http://localhost:4000/get/poster' ref='main'>\r\n                    <source src={this.state.videoURL} type=\"video/mp4\"/>\r\n                    Please, refresh the web site.\r\n                </video>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CamView;"]},"metadata":{},"sourceType":"module"}