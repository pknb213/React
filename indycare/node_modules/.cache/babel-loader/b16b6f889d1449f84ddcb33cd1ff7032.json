{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\src\\\\components\\\\Robot\\\\Cam.js\";\nimport React from 'react';\nimport iconCam from \"../../resources/Robot/icon-dashcam.svg\";\nimport iconTime from \"../../resources/Robot/icon-time.svg\";\nimport loadingImg from \"../../resources/Robot/video_loading.jpg\";\nimport { ImgOnly } from \"../Public/Image\";\nimport { AxiosInstance as Axios } from \"axios\";\n\nclass CamView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tick: new Date(),\n      clipTick: new Date()\n    };\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.videoID = setInterval(() => this.clip(), 30000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n    clearInterval(this.videoID);\n  }\n\n  clip() {\n    Axios.get('http://localhost:4000/clip/' + this.props.sn).then(res => {\n      console.log(res);\n      const video = document.getElementById('clip');\n      video.style.display = 'block';\n      video.setAttribute('poster', {\n        loadingImg\n      });\n      video.setAttribute('src', 'http://localhost:4000/get/clip/' + this.props.sn + '/1?ts=' + new Date().valueOf());\n      this.setState({\n        clipTick: new Date().valueOf()\n      });\n    }).catch(err => {\n      alert(err);\n    });\n  }\n\n  tick() {\n    this.setState({\n      tick: new Date()\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"event_view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(ImgOnly, {\n      src: iconCam,\n      alt: \"icon_dashcam\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"clip_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"\\xA0\\xA0Workplace View\")), React.createElement(\"div\", {\n      className: \"time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: iconTime,\n      alt: \"icon_time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"\\xA0\\xA0\", this.state.tick.toLocaleTimeString(), \"\\xA0\\xA0\\xA0\")), React.createElement(\"video\", {\n      id: \"clip\",\n      width: \"350\",\n      height: \"280\",\n      controls: true,\n      loop: true,\n      muted: true,\n      autoPlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default CamView;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/React/indycare/src/components/Robot/Cam.js"],"names":["React","loadingImg","ImgOnly","AxiosInstance","Axios","CamView","Component","constructor","props","state","tick","Date","clipTick","componentDidMount","timerID","setInterval","videoID","clip","componentWillUnmount","clearInterval","get","sn","then","res","console","log","video","document","getElementById","style","display","setAttribute","valueOf","setState","catch","err","alert","render","iconCam","iconTime","toLocaleTimeString"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport iconCam from \"../../resources/Robot/icon-dashcam.svg\";\r\nimport iconTime from \"../../resources/Robot/icon-time.svg\";\r\nimport loadingImg from \"../../resources/Robot/video_loading.jpg\";\r\nimport {ImgOnly} from \"../Public/Image\";\r\nimport {AxiosInstance as Axios} from \"axios\";\r\n\r\nclass CamView extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tick : new Date(),\r\n            clipTick : new Date()\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.timerID = setInterval(\r\n            () => this.tick(), 1000\r\n        );\r\n       this.videoID = setInterval(\r\n           () => this.clip(), 30000\r\n       );\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerID);\r\n        clearInterval(this.videoID);\r\n    }\r\n\r\n    clip(){\r\n         Axios.get('http://localhost:4000/clip/' + this.props.sn)\r\n            .then(res => {\r\n                console.log(res);\r\n                const video = document.getElementById('clip');\r\n                video.style.display = 'block';\r\n                video.setAttribute('poster', {loadingImg});\r\n                video.setAttribute('src',\r\n                    'http://localhost:4000/get/clip/' + this.props.sn + '/1?ts=' + new Date().valueOf());\r\n                this.setState({\r\n                    clipTick : new Date().valueOf()\r\n                })\r\n            })\r\n            .catch(err => {\r\n                alert(err);\r\n            })\r\n    }\r\n\r\n    tick(){\r\n        this.setState({\r\n            tick : new Date()\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n           <div className=\"event_view\">\r\n                <div className=\"section_title\">\r\n                    <ImgOnly src={iconCam} alt=\"icon_dashcam\"/>\r\n                    <div id=\"clip_msg\"/>\r\n                    <h3>&nbsp;&nbsp;Workplace View</h3>\r\n                </div>\r\n                <div className=\"time\">\r\n                    <img src={iconTime} alt=\"icon_time\"/>\r\n                    <h3>&nbsp;&nbsp;{this.state.tick.toLocaleTimeString()}&nbsp;&nbsp;&nbsp;</h3>\r\n                </div>\r\n                <video id=\"clip\" width=\"350\" height=\"280\" controls loop muted autoPlay/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CamView;"]},"metadata":{},"sourceType":"module"}