{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\src\\\\components\\\\Robot\\\\Modal.js\";\nimport React from 'react';\nimport Axios from 'axios';\nimport $ from 'jquery';\nimport DataTable from 'datatables.net-dt';\nimport DownIcon from \"../../resources/Robot/icon-download.svg\";\n$.DataTable = DataTable;\nexport class Modal extends React.Component {\n  constructor(props) {\n    super(props); // this.myRef = React.createRef();\n  }\n\n  componentDidMount(nextProps, nextState) {\n    if (this.props.reload) {\n      $(this.refs.main).DataTable().ajax.reload();\n    } else {\n      Axios.get('http://localhost:4000/datatable/events/' + this.props.sn + '/all').then(res => {\n        console.log(res);\n        this.table = $(this.refs.main).DataTable({\n          data: res.data,\n          process: true,\n          searching: false,\n          paging: false,\n          bInfo: false,\n          order: [[0, 'asc']],\n          columns: [{\n            \"data\": \"occurrence_time\"\n          }, {\n            \"data\": \"code\"\n          }, {\n            \"data\": \"down\"\n          }],\n          language: {\n            \"emptyTable\": \"저장된 이벤트 데이터가 없습니다.\"\n          }\n        });\n        this.table.rows().every(index => {\n          let a = this.table.cell(index, 2).data();\n          this.table.cell(index, 2).data(a + '<img alt=\"\" src=' + DownIcon + '></a>');\n        });\n      }).catch(e => {\n        alert(e);\n      }).finally(() => {});\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    let table = $(this.refs.main);\n    table.clear(); //this.table.rows.add(this.transform(this.props.data));\n\n    table.draw();\n  }\n\n  componentWillUnmount() {\n    $('.event_history').find('dataTable_history').DataTable().destroy(true);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"history_table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"All Event History\"), React.createElement(\"table\", {\n      id: \"dataTable_history\",\n      className: \"\",\n      ref: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"DATE\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"EVENT\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"LOG\")))));\n  }\n\n}\n/*\r\n<React.Fragment>\r\n    {\r\n        isOpen ?\r\n            <React.Fragment>\r\n                <div className=\"history_table\">\r\n                    <h2>All Event History</h2>\r\n                    <table id=\"dataTable_history\" className=\"\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>DATE</th>\r\n                            <th>EVENT</th>\r\n                            <th>LOG</th>\r\n                        </tr>\r\n                        </thead>\r\n                    </table>\r\n                </div>\r\n            </React.Fragment>\r\n            :\r\n            null\r\n    }\r\n</React.Fragment>\r\n*/","map":{"version":3,"sources":["C:/Users/Administrator/Documents/React/indycare/src/components/Robot/Modal.js"],"names":["React","Axios","$","DataTable","Modal","Component","constructor","props","componentDidMount","nextProps","nextState","reload","refs","main","ajax","get","sn","then","res","console","log","table","data","process","searching","paging","bInfo","order","columns","language","rows","every","index","a","cell","DownIcon","catch","e","alert","finally","componentDidUpdate","prevProps","prevState","snapshot","clear","draw","componentWillUnmount","find","destroy","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Axios from 'axios';\r\nimport $ from 'jquery';\r\nimport DataTable from 'datatables.net-dt';\r\nimport DownIcon from '../../resources/Robot/icon-download.svg';\r\n\r\n$.DataTable = DataTable;\r\n\r\nexport class Modal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // this.myRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount(nextProps, nextState) {\r\n        if (this.props.reload) {\r\n            $(this.refs.main).DataTable().ajax.reload();\r\n        } else {\r\n            Axios.get('http://localhost:4000/datatable/events/' + this.props.sn + '/all')\r\n                .then(res => {\r\n                    console.log(res);\r\n                    this.table = $(this.refs.main).DataTable({\r\n                        data: res.data,\r\n                        process: true,\r\n                        searching: false,\r\n                        paging: false,\r\n                        bInfo: false,\r\n                        order: [[0, 'asc']],\r\n                        columns: [\r\n                            {\"data\": \"occurrence_time\"},\r\n                            {\"data\": \"code\"},\r\n                            {\"data\": \"down\"}\r\n                        ],\r\n                        language: {\r\n                            \"emptyTable\": \"저장된 이벤트 데이터가 없습니다.\"\r\n                        }\r\n                    });\r\n                    this.table.rows().every((index) => {\r\n                        let a = this.table.cell(index, 2).data();\r\n                        this.table.cell(index, 2).data(a + '<img alt=\"\" src=' + DownIcon + '></a>');\r\n                    });\r\n                }).catch(e => {\r\n                alert(e);\r\n            }).finally(() => {\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        let table= $(this.refs.main);\r\n        table.clear();\r\n        //this.table.rows.add(this.transform(this.props.data));\r\n        table.draw();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        $('.event_history')\r\n            .find('dataTable_history')\r\n            .DataTable()\r\n            .destroy(true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"history_table\">\r\n                <h2>All Event History</h2>\r\n                <table id=\"dataTable_history\" className=\"\" ref=\"main\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>DATE</th>\r\n                        <th>EVENT</th>\r\n                        <th>LOG</th>\r\n                    </tr>\r\n                    </thead>\r\n                </table>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n/*\r\n<React.Fragment>\r\n    {\r\n        isOpen ?\r\n            <React.Fragment>\r\n                <div className=\"history_table\">\r\n                    <h2>All Event History</h2>\r\n                    <table id=\"dataTable_history\" className=\"\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>DATE</th>\r\n                            <th>EVENT</th>\r\n                            <th>LOG</th>\r\n                        </tr>\r\n                        </thead>\r\n                    </table>\r\n                </div>\r\n            </React.Fragment>\r\n            :\r\n            null\r\n    }\r\n</React.Fragment>\r\n*/"]},"metadata":{},"sourceType":"module"}