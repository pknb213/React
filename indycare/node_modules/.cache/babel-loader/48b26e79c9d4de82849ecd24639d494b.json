{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\React\\\\indycare\\\\src\\\\components\\\\Robot\\\\Cam.js\";\nimport React from 'react';\nimport iconCam from \"../../resources/Robot/icon-dashcam.svg\";\nimport iconTime from \"../../resources/Robot/icon-time.svg\";\nimport { ImgOnly } from \"../Public/Image\";\nimport Axios from \"axios\";\n\nclass CamView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tick: new Date(),\n      clipTick: new Date(),\n      videoURL: ''\n    };\n  }\n\n  componentDidMount() {\n    this.clip(); // Before Loop\n\n    this.timerID = setInterval(() => this.tick(), 1000);\n    this.videoID = setInterval(() => this.clip(), 15000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n    clearInterval(this.videoID);\n  }\n\n  clip() {\n    Axios.get('http://localhost:4000/clip/' + this.props.sn).then(res => {\n      // console.log(res);\n      if (res.data === 'ok') {\n        const video = this.refs.main; //video.style.display = 'block';\n\n        Axios.get('http://localhost:4000/get/clip/' + this.props.sn).then(res => {\n          // console.log(res);\n          this.setState({\n            videoURL: res\n          });\n        });\n        video.setAttribute('src', 'http://localhost:4000/get/clip/' + this.props.sn);\n        this.setState({\n          clipTick: new Date().valueOf()\n        });\n      }\n    }).catch(err => {\n      alert(err);\n    });\n  }\n\n  tick() {\n    this.setState({\n      tick: new Date()\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"event_view\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(ImgOnly, {\n      src: iconCam,\n      alt: \"icon_dashcam\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"clip_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"\\xA0\\xA0Workplace View\")), React.createElement(\"div\", {\n      className: \"time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: iconTime,\n      alt: \"icon_time\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"\\xA0\\xA0\", this.state.tick.toLocaleTimeString(), \"\\xA0\\xA0\\xA0\")), React.createElement(\"video\", {\n      id: \"clip\",\n      width: \"350\",\n      height: \"280\",\n      controls: true,\n      loop: true,\n      muted: true,\n      autoPlay: true,\n      poster: \"http://localhost:4000/get/poster\",\n      ref: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"source\", {\n      src: this.state.videoURL,\n      type: \"video/mp4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), \"Please, refresh the web site.\"));\n  }\n\n}\n\nexport default CamView;","map":{"version":3,"sources":["C:/Users/Administrator/Documents/React/indycare/src/components/Robot/Cam.js"],"names":["React","ImgOnly","Axios","CamView","Component","constructor","props","state","tick","Date","clipTick","videoURL","componentDidMount","clip","timerID","setInterval","videoID","componentWillUnmount","clearInterval","get","sn","then","res","data","video","refs","main","setState","setAttribute","valueOf","catch","err","alert","render","iconCam","iconTime","toLocaleTimeString"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport iconCam from \"../../resources/Robot/icon-dashcam.svg\";\r\nimport iconTime from \"../../resources/Robot/icon-time.svg\";\r\nimport {ImgOnly} from \"../Public/Image\";\r\nimport Axios from \"axios\";\r\n\r\nclass CamView extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tick: new Date(),\r\n            clipTick: new Date(),\r\n            videoURL: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.clip(); // Before Loop\r\n        this.timerID = setInterval(\r\n            () => this.tick(), 1000\r\n        );\r\n        this.videoID = setInterval(\r\n            () => this.clip(), 15000\r\n        );\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerID);\r\n        clearInterval(this.videoID);\r\n    }\r\n\r\n    clip() {\r\n        Axios.get('http://localhost:4000/clip/' + this.props.sn)\r\n            .then(res => {\r\n                // console.log(res);\r\n                if (res.data === 'ok') {\r\n                    const video = this.refs.main;\r\n                    //video.style.display = 'block';\r\n                    Axios.get('http://localhost:4000/get/clip/' + this.props.sn)\r\n                        .then(res =>{\r\n                            // console.log(res);\r\n                            this.setState({\r\n                                videoURL: res\r\n                            });\r\n                        });\r\n                    video.setAttribute('src',\r\n                        'http://localhost:4000/get/clip/' + this.props.sn);\r\n                    this.setState({\r\n                        clipTick: new Date().valueOf()\r\n                    })\r\n                }\r\n            })\r\n            .catch(err => {\r\n                alert(err);\r\n            })\r\n    }\r\n\r\n    tick() {\r\n        this.setState({\r\n            tick: new Date()\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"event_view\">\r\n                <div className=\"section_title\">\r\n                    <ImgOnly src={iconCam} alt=\"icon_dashcam\"/>\r\n                    <div id=\"clip_msg\"/>\r\n                    <h3>&nbsp;&nbsp;Workplace View</h3>\r\n                </div>\r\n                <div className=\"time\">\r\n                    <img src={iconTime} alt=\"icon_time\"/>\r\n                    <h3>&nbsp;&nbsp;{this.state.tick.toLocaleTimeString()}&nbsp;&nbsp;&nbsp;</h3>\r\n                </div>\r\n                <video id=\"clip\" width=\"350\" height=\"280\" controls loop muted autoPlay\r\n                       poster='http://localhost:4000/get/poster' ref='main'>\r\n                    <source src={this.state.videoURL} type=\"video/mp4\"/>\r\n                    Please, refresh the web site.\r\n                </video>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CamView;"]},"metadata":{},"sourceType":"module"}